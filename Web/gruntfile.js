const webpackConfig=require("./webpack.config");module.exports=function(s){s.loadNpmTasks("grunt-contrib-clean"),s.loadNpmTasks("grunt-markdown"),s.loadNpmTasks("grunt-contrib-less"),s.loadNpmTasks("grunt-contrib-cssmin"),s.loadNpmTasks("grunt-contrib-copy"),s.loadNpmTasks("grunt-devserver"),s.loadNpmTasks("grunt-contrib-watch"),s.loadNpmTasks("grunt-webpack"),s.loadNpmTasks("grunt-postcss"),s.loadTasks("./tasks"),s.initConfig({clean:["./dist"],markdown:{all:{files:[{cwd:"src",expand:!0,src:"**/*.md",dest:"dist/.",ext:".html"},{cwd:"src",expand:!0,src:"**/*.html",dest:"dist/.",ext:".html"}],options:{template:"src/layout.jst",contextBinder:!0,headerIds:!1,gfm:!0}}},less:{all:{files:{"dist/css/site.css":"src/css/site.less"}}},postcss:{options:{processors:[require("autoprefixer")()]},dist:{src:"dist/css/*.css"}},cssmin:{target:{files:{"dist/css/site.min.css":"dist/css/site.css"}}},copy:{all:{files:[{expand:!0,cwd:"node_modules",src:["bootstrap/dist/**","jquery/dist/**","axios/dist/**","vue/dist/**"],dest:"dist/lib/"},{expand:!0,cwd:"src",src:["favicon.ico","images/**"],dest:"dist"}]}},webpack:{prod:Object.assign({mode:"production"},webpackConfig),dev:Object.assign({watch:!0,mode:"development"},webpackConfig)},watch:{site:{files:["src/**/*.*"],tasks:["gen"],options:{spawn:!1}},webpack:{files:["src/app/**/*.*"],tasks:["webpack:dev"],options:{spawn:!1}}},devserver:{dist:{options:{base:"dist"}}}}),s.registerTask("gen",["clean","compile-docs","markdown:all","less:all","postcss","cssmin","copy"])};
